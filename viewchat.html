
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />
    <script src="js/jquery-main.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	  
     <script   src="http://code.jquery.com/jquery-3.3.1.min.js"   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="   crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" ></script>
	
    <title>Reporting</title>
	
	<script type="text/javascript">
	 $(document).ready(function () {
        if (localStorage["adminbot"] == "valid") {
          var username = localStorage["username"];
          document.getElementById("username").innerHTML = username;
          console.log(username);
        } else {
          window.open("index.html", "_self");
        }
      });
		
		  function reporting(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='reporting.html?authT='+authT;
	
	}
	
	function domains(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='domains.html?authT='+authT;
	
	}
	
	function createdomains(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='createdomain.html?authT='+authT;
	
	}
	
	function viewintent(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='intent.html?authT='+authT;
	
	}
	
	function addhuman(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='addhumanagent.html?authT='+authT;
	
	}
	
	function dashboard(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='dashboard.html?authT='+authT;
	
	}
	function faq(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='faq.html?authT='+authT;
	
	}
	function trainbot(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='trainbycsv.html?authT='+authT;
	
	}
	function addagent() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const authT = urlParams.get("authT");
        window.location = "allagent.html?authT=" + authT;
      }
	  
	   function websitelink() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const authT = urlParams.get("authT");
        window.location = "websitelink.html?authT=" + authT;
      }
	
	function quickLinks() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const authT = urlParams.get("authT");
        window.location = "createQuicklinks.html?authT=" + authT;
      }
     function logout() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const authT = urlParams.get("authT");
        $.ajax({
          type: "Get",
          url: "https://www.cybot.co/api/logout",
          headers: {
            Authorization: "Token " + authT + "",
          },
          success: function (data) {
            window.location = "index.html";
          },
          error: function (data) {
            window.location = "index.html";
          },
        });
      }
	  
	$(document).ready(function () {
		
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		const date = urlParams.get('date')
			console.log(date);
			// shirt

			const email = urlParams.get('email')
			//console.log("email=="+email);
			// blue
		 
		const authT = urlParams.get('authT');
		  var Data = {"user_id": email,"date": date}
		  
		
		          $.ajax({
							type: 'post',
							url:'https://www.cybot.co/message',
						    data: Data,
		                    dataType:'json',
							"headers": {
					       "Authorization": "Token "+authT+""
				             },
							success: function(data) {
						//	alert(data);
							var KeyValueData = tableData(data);
                           var drawdata = {"data": KeyValueData};
						  
						    table = $('#reportingdata').DataTable({

                                  processing: true,

                                  autoWidth: false,

                                  data: drawdata.data,

                                  scrollY: 380,

                                  scrollX: true,

                                  paging: false,

                                  ordering: false,
								  columns:[
                                             { "data": "msg"},
                                             { "data": "response"},
                                             { "data": "agent_name"}
										
                                         ], order: [[ 0, "desc" ]]

                             });
						   
						   
							},
							error: function(data){
								alert('Error in data');
							}
						});
		
		
		
		});
		
		
	function tableData(result){
       var datalist =  new Array();
      for (var i = 0; i < result.length; i++)
       {
	        var msg = result[i].msg;
			    var response = result[i].response;
          var agent_name = result[i].agent_name;
          datalist[i] = {"msg":msg ,"response":response, "agent_name":agent_name};
        }
       return datalist;
}
		
	function addhuman(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='addhumanagent.html?authT='+authT;
	
	}
		
		function dashboard(){
		   const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			const authT = urlParams.get('authT');
		 window.location='dashboard_new.html?authT='+authT;
	
	}
    </script>
</head>
<body>
    <div class="main-container">
         <div class="left-panel">
             <div class="logobox"></div>
          <ul>
          <li href="" onclick="dashboard()">
            <span class="fa fa-creative-commons"></span>
          </li>
         
          <li href="" onclick="domains()"><span class="fa fa-book"></span></li>
		   <li href="" onclick="quickLinks()"><span class="fa fa-link"></span></span></li>
          <li href="" onclick="addagent()">
            <span class="fa fa-user-o"></span>
          </li>
          <li href="" onclick="reporting()">
            <span class="fa fa-bar-chart"></span>
          </li>    
		 <li href="" onclick="websitelink()" ><span class="fa fa-globe"></span></li>
          <li href="" onclick="faq()"><span class="fa fa-upload"></span></li>
		   
		   <li href="" onclick="trainbot()"><span class="fa fa-cube"></span></li>
		<!--   <li><span class="fa fa-bullhorn"></span></li>
          <li><span class="fa fa-bookmark-o"></span></li> -->
          <li href="" onclick="setting()"><span class="fa fa-cog"></span></li>
        </ul>
         </div><!-- left-panel -->
         <div class="right-panel right-bg chat-payment">
		 <div class="right-header">
             <div class="row">
                 <div class="col-md-12 borderbtm">
                    <div class="row align-items-center">
                        <div class="col-md-5">
                            <h1 class="mainheading"><a href="#" class="backbtn"><span class="fa fa-angle-left"></span></a>Reporting</h1>
                        </div><!-- col-md-5 -->
                        <div class="col-md-7 rhead-search">
                            <ul class="profile-dropdown">
                        <li>
                          <a href="#"
                            ><span class="profileimg"
                              >N<i class="fa fa-user" aria-hidden="true"></i>
                            </span>
                            <p id="username"><span>Active</span></p></a
                          >
                        </li>
                        <li>
                          <a href="#"
                            ><span class="fa fa-toggle-on"></span>Set inactive
                            on IntelliAssign</a
                          >
                        </li>
                        <li>
                          <a href="#"
                            ><span class="fa fa-user-o"></span>Profile
                            Settings</a
                          >
                        </li>
                        <li>
                          <a href="#" onclick="logout()"
                            ><span class="fa fa-sign-out"></span> Logout</a
                          >
                        </li>
                      </ul>
                        </div><!-- col-md-7 -->
                    </div>
                 </div>
             </div><!-- row -->
            </div><!-- right-header -->
            <div class="dashboard-container">
               
                <h1>Reporting</h1>                
                <div class="newform">
				   <div class="responsive-table">
                     <table id="reportingdata">
								<thead>
                                    <tr>
                                        <th>User Query</th>
                                        <th>Chat Bot Response</th>
                                        <th>Agent Name</th>
                                    </tr>
									</thead>
                     	             <tbody>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                       
                                    </tr>
									</tbody>
                                </table>
                   </div><!-- responsive-table -->
				   
                </div><!-- newform -->
            </div><!-- dashboard-container -->
         </div><!-- right-panel --> 
    </div><!-- main-container -->
 
 
 <script type="text/javascript">
        $(document).ready(function () {
            $(".menuicon").click(function () {
                $(".leftnav").toggle();
            });
			
        });
		
    </script>
</body>
</html>
<!-- <script type="text/javascript">
    $(document).ready(function () {
        $(".newform li").each(function () {
            $(this).has("textarea").addClass('fullli');
        });

        $(".leftnav > li").each(function () {
            $(this).has("ul").addClass('submenu');
            $(this).has("ul").click(function (e) {
                if ($(this).hasClass('subnavactive')) {
                    $(this).removeClass('subnavactive').children('ul').slideUp();
                }
                else {
                    $(".leftnav > li").removeClass('subnavactive').children('ul').slideUp();
                    $(this).addClass('subnavactive').children('ul').slideDown();
                }
            });
        });

    });
</script> -->
